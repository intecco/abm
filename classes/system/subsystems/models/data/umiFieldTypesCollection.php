<?php
 class umiFieldTypesCollection extends singleton implements iSingleton, iUmiFieldTypesCollection {private $field_types = Array();protected function __construct() {$this->loadFieldTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = NULL) {return parent::getInstance(__CLASS__);}public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v17f71d965fe9589ddbd11caf7182243e = "string", $v96a76ec43956dac431b643cbd544dd08 = false, $vf089d93c2ef0d088edadddb0028d548d = false) {if(!umiFieldType::isValidDataType($v17f71d965fe9589ddbd11caf7182243e)) {throw new coreException("Not valid data type given");return false;}$this->disableCache();cacheFrontend::getInstance()->flush();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_types (data_type) VALUES('{$v17f71d965fe9589ddbd11caf7182243e}')";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = l_mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}$v1e3f04102267eaf5e8d0ca424fd5c561 = l_mysql_insert_id();$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$v519504d7d4beb745dac24ccfb6c1d7c9->setName($vb068931cc450442b63f5b3d276ea4297);$v519504d7d4beb745dac24ccfb6c1d7c9->setDataType($v17f71d965fe9589ddbd11caf7182243e);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsMultiple($v96a76ec43956dac431b643cbd544dd08);$v519504d7d4beb745dac24ccfb6c1d7c9->setIsUnsigned($vf089d93c2ef0d088edadddb0028d548d);$v519504d7d4beb745dac24ccfb6c1d7c9->commit();$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;return $v1e3f04102267eaf5e8d0ca424fd5c561;}public function delFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {$this->disableCache();cacheFrontend::getInstance()->flush();if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {$v1e3f04102267eaf5e8d0ca424fd5c561 = (int) $v1e3f04102267eaf5e8d0ca424fd5c561;$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_field_types WHERE id = '{$v1e3f04102267eaf5e8d0ca424fd5c561}'";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = l_mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}unset($this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561]);return true;}else {return false;}}public function getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561) {if($this->isExists($v1e3f04102267eaf5e8d0ca424fd5c561)) {return $this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561];}else {return true;}}public function getFieldTypeByDataType($v17f71d965fe9589ddbd11caf7182243e, $vce495ab8d79db0d37413d8e95b54e606 = false) {if(!strlen($v17f71d965fe9589ddbd11caf7182243e)) return false;$v3fa9d6639f24f9bb4bf81ac6bdbdbc8c = $this->getFieldTypesList();$v519504d7d4beb745dac24ccfb6c1d7c9 = false;foreach($v3fa9d6639f24f9bb4bf81ac6bdbdbc8c as $v39bb421562d6f6128a957f3d162538d2) {if ($v39bb421562d6f6128a957f3d162538d2->getDataType() == $v17f71d965fe9589ddbd11caf7182243e && $v39bb421562d6f6128a957f3d162538d2->getIsMultiple() == $vce495ab8d79db0d37413d8e95b54e606) {$v519504d7d4beb745dac24ccfb6c1d7c9 = $v39bb421562d6f6128a957f3d162538d2;break;}}return $v519504d7d4beb745dac24ccfb6c1d7c9;}public function isExists($v1e3f04102267eaf5e8d0ca424fd5c561) {return (bool) array_key_exists($v1e3f04102267eaf5e8d0ca424fd5c561, $this->field_types);}private function loadFieldTypes() {$vb99eb979e6f6efabc396f777b503f7e7 = cacheFrontend::getInstance();$v15bd395be197dd13a55dac4aac09c1e8 = $vb99eb979e6f6efabc396f777b503f7e7->loadData("field_types");if(!is_array($v15bd395be197dd13a55dac4aac09c1e8)) {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id, name, data_type, is_multiple, is_unsigned FROM cms3_object_field_types ORDER BY name ASC";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);$v15bd395be197dd13a55dac4aac09c1e8 = array();while(list($v1e3f04102267eaf5e8d0ca424fd5c561) = $vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_row($result)) {$v15bd395be197dd13a55dac4aac09c1e8[$v1e3f04102267eaf5e8d0ca424fd5c561] = $vf1965a857bc285d26fe22023aa5ab50d;}$vb99eb979e6f6efabc396f777b503f7e7->saveData("field_types", $v15bd395be197dd13a55dac4aac09c1e8, 3600);}else $vf1965a857bc285d26fe22023aa5ab50d = false;foreach($v15bd395be197dd13a55dac4aac09c1e8 as $v1e3f04102267eaf5e8d0ca424fd5c561 => $vf1965a857bc285d26fe22023aa5ab50d) {$v519504d7d4beb745dac24ccfb6c1d7c9 = $vb99eb979e6f6efabc396f777b503f7e7->load($v1e3f04102267eaf5e8d0ca424fd5c561, "field_type");if($v519504d7d4beb745dac24ccfb6c1d7c9 instanceof umiFieldType == false) {try {$v519504d7d4beb745dac24ccfb6c1d7c9 = new umiFieldType($v1e3f04102267eaf5e8d0ca424fd5c561, $vf1965a857bc285d26fe22023aa5ab50d);}catch(privateException $ve1671797c52e15f763380b45e841ec32) {continue;}$vb99eb979e6f6efabc396f777b503f7e7->save($v519504d7d4beb745dac24ccfb6c1d7c9, "field_type");}$this->field_types[$v1e3f04102267eaf5e8d0ca424fd5c561] = $v519504d7d4beb745dac24ccfb6c1d7c9;}return true;}public function getFieldTypesList() {return $this->field_types;}public function clearCache() {$v14f802e1fba977727845e8872c1743a7 = array_keys($this->field_types);foreach($v14f802e1fba977727845e8872c1743a7 as $v3c6e0b8a9c15224a8228b9a98ca1531d) unset($this->field_types[$v3c6e0b8a9c15224a8228b9a98ca1531d]);$this->field_types = array();$this->loadFieldTypes();}}?>
