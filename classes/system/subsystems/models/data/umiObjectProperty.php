<?php
 abstract class umiObjectProperty extends umiEntinty implements iUmiEntinty, iUmiObjectProperty {protected   $object_id, $field_id, $field, $field_type,   $value = array(), $tableName = "cms3_object_content", $is_updated = false;protected static $dataCache = array();public $store_type = "property";public static $USE_FORCE_OBJECTS_CREATION = false;public static $IGNORE_FILTER_INPUT_STRING = false;public static $IGNORE_FILTER_OUTPUT_STRING = false;public static $USE_TRANSACTIONS = true;public static $IGNORE_CACHE = false;public function __construct($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe) {$this->tableName = umiBranch::getBranchedTableByTypeId($v94757cae63fd3e398c0811a976dd6bbe);$this->setId($vb80bb7740288fda1f201890375a60c8f);$this->object_id = (int) $vb80bb7740288fda1f201890375a60c8f;$this->field = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$this->field_id = $v3aabf39f2d943fa886d86dcbbee4d910;$this->loadInfo();}public static function getProperty($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe) {$v6f66e878c62db60568a3487869695820 = self::getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910);return new $v6f66e878c62db60568a3487869695820($vb80bb7740288fda1f201890375a60c8f, $v3aabf39f2d943fa886d86dcbbee4d910, $v94757cae63fd3e398c0811a976dd6bbe);}public function getId() {return $this->id . "." . $this->field_id;}public function getValue(array $v21ffce5b8a6cc8cc6a41448dd69623c9 = NULL) {if($this->getIsMultiple() === false) {if(sizeof($this->value) > 0) {list($v2063c1608d6e0baf80249c42e2be5804) = $this->value;}else {$v2063c1608d6e0baf80249c42e2be5804 = null;}}else {$v2063c1608d6e0baf80249c42e2be5804 = $this->value;}if(!is_null($v21ffce5b8a6cc8cc6a41448dd69623c9)) {$v2063c1608d6e0baf80249c42e2be5804 = $this->applyParams($v2063c1608d6e0baf80249c42e2be5804, $v21ffce5b8a6cc8cc6a41448dd69623c9);}if($v6b1a57fa235477758817df3c91158006 = $this->field->getRestrictionId()) {$v3dadfaeb46ec74762b37de11fea7605c = baseRestriction::get($v6b1a57fa235477758817df3c91158006);if($v3dadfaeb46ec74762b37de11fea7605c instanceof iNormalizeOutRestriction) {$v2063c1608d6e0baf80249c42e2be5804 = $v3dadfaeb46ec74762b37de11fea7605c->normalizeOut($v2063c1608d6e0baf80249c42e2be5804, $this->object_id);}}return $v2063c1608d6e0baf80249c42e2be5804;}public function getName() {return $this->field->getName();}public function getTitle() {return $this->field->getTitle();}public function validateValue($v2063c1608d6e0baf80249c42e2be5804) {if((is_null($v2063c1608d6e0baf80249c42e2be5804) || $v2063c1608d6e0baf80249c42e2be5804 === false || $v2063c1608d6e0baf80249c42e2be5804 === "") && $this->field->getIsRequired()) {throw new valueRequiredException(getLabel('error-value-required', null, $this->getTitle()));}if($v2063c1608d6e0baf80249c42e2be5804 && $v6b1a57fa235477758817df3c91158006 = $this->field->getRestrictionId()) {$v3dadfaeb46ec74762b37de11fea7605c = baseRestriction::get($v6b1a57fa235477758817df3c91158006);if($v3dadfaeb46ec74762b37de11fea7605c instanceof baseRestriction) {if($v3dadfaeb46ec74762b37de11fea7605c instanceof iNormalizeInRestriction) {$v2063c1608d6e0baf80249c42e2be5804 = $v3dadfaeb46ec74762b37de11fea7605c->normalizeIn($v2063c1608d6e0baf80249c42e2be5804, $this->object_id);}if($v3dadfaeb46ec74762b37de11fea7605c->validate($v2063c1608d6e0baf80249c42e2be5804, $this->object_id) === false) {throw new wrongValueException(getLabel($v3dadfaeb46ec74762b37de11fea7605c->getErrorMessage(), null, $this->getTitle()));}}}return $v2063c1608d6e0baf80249c42e2be5804;}public function setValue($v2063c1608d6e0baf80249c42e2be5804) {$v2063c1608d6e0baf80249c42e2be5804 = $this->validateValue($v2063c1608d6e0baf80249c42e2be5804);if(!is_array($v2063c1608d6e0baf80249c42e2be5804)) {$v2063c1608d6e0baf80249c42e2be5804 = Array($v2063c1608d6e0baf80249c42e2be5804);}$vfb5eb12472d87d2d7be0b9ca6a410c2b = array(1, 2, 3, 4, 5, 6, 7, 8, 11, 12, 14, 15, 16, 17, 18, 19, 20,21, 22, 23, 24, 25, 26, 27, 28, 29, 30, 31);$v240bf022e685b0ee30ad9fe9e1fb5d5b = '';foreach ($vfb5eb12472d87d2d7be0b9ca6a410c2b as $v97bff26855a8bfa63e05d5477e794b24) {$v240bf022e685b0ee30ad9fe9e1fb5d5b = $v240bf022e685b0ee30ad9fe9e1fb5d5b . chr($v97bff26855a8bfa63e05d5477e794b24);}foreach($v2063c1608d6e0baf80249c42e2be5804 as &$v9e3669d19b675bd57058fd4664205d2a) {if(is_string($v9e3669d19b675bd57058fd4664205d2a)) $v9e3669d19b675bd57058fd4664205d2a = preg_replace("/[" . $v240bf022e685b0ee30ad9fe9e1fb5d5b . "]/isu", "", $v9e3669d19b675bd57058fd4664205d2a);}$v17f71d965fe9589ddbd11caf7182243e = $this->getDataType();if ($v17f71d965fe9589ddbd11caf7182243e === 'date') {foreach ($v2063c1608d6e0baf80249c42e2be5804 as $v8dcd0fced6cad049fa9d12a0e56b5bb6=>$ve0c750ab2ba65ff988478860712c5ff2) {if (!($ve0c750ab2ba65ff988478860712c5ff2 instanceof umiDate)) {$v2063c1608d6e0baf80249c42e2be5804[$v8dcd0fced6cad049fa9d12a0e56b5bb6] = new umiDate(intval($ve0c750ab2ba65ff988478860712c5ff2));}}}$this->value = $v2063c1608d6e0baf80249c42e2be5804;return $this->setIsUpdated();}public function resetValue() {$this->value = Array();$this->setIsUpdated();}protected function loadInfo() {$v06e3d36fa30cea095545139854ad1fb9 = $this->field;$v3fa9d6639f24f9bb4bf81ac6bdbdbc8c = umiFieldTypesCollection::getInstance();$v1e3f04102267eaf5e8d0ca424fd5c561 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v519504d7d4beb745dac24ccfb6c1d7c9 = $v3fa9d6639f24f9bb4bf81ac6bdbdbc8c->getFieldType($v1e3f04102267eaf5e8d0ca424fd5c561);$this->field_type = $v519504d7d4beb745dac24ccfb6c1d7c9;$this->value = $this->loadValue();}protected function save() {$va8cfde6331bd59eb2ac96f8911c4b666 = umiObjectsCollection::getInstance()->getObject($this->id);if($va8cfde6331bd59eb2ac96f8911c4b666 instanceof umiObject) {if($va8cfde6331bd59eb2ac96f8911c4b666->checkSelf() == false) {cacheFrontend::getInstance()->del($va8cfde6331bd59eb2ac96f8911c4b666->getId(), "object");return false;}}cacheFrontend::getInstance()->del($this->getId(), "property");if(self::$USE_TRANSACTIONS) {l_mysql_query("START TRANSACTION /* Saving property for object {$this->id} */");}$result = $this->saveValue();if(self::$USE_TRANSACTIONS) {l_mysql_query("COMMIT");}if(isset(umiObjectProperty::$dataCache[$this->object_id])) {unset(umiObjectProperty::$dataCache[$this->object_id]);}$this->loadInfo();return $result;}public function getIsMultiple() {return $this->field_type->getIsMultiple();}public function getIsUnsigned() {return $this->field_type->getIsUnsigned();}public function getDataType() {return $this->field_type->getDataType();}public function getIsLocked() {return $this->field->getIsLocked();}public function getIsInheritable() {return $this->field->getIsInheritable();}public function getIsVisible() {return $this->field->getIsVisible();}public static function filterInputString($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = umiObjectProperty::filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21);$vb45cffe084dd3d20d928bee85e7b0f21 = l_mysql_real_escape_string($vb45cffe084dd3d20d928bee85e7b0f21);if(isset($_SERVER['DOCUMENT_ROOT']) && cmsController::getInstance()->getCurrentMode() != "admin" && !umiObjectProperty::$IGNORE_FILTER_INPUT_STRING && !(defined("CRON")&&CRON)) {$vb45cffe084dd3d20d928bee85e7b0f21 = htmlspecialchars( htmlspecialchars_decode($vb45cffe084dd3d20d928bee85e7b0f21), ENT_NOQUOTES);$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#37;", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterOutputString($vb45cffe084dd3d20d928bee85e7b0f21) {if(!isset($_SERVER['DOCUMENT_ROOT']) || cmsController::getInstance()->getCurrentMode() == "admin" || self::$IGNORE_FILTER_OUTPUT_STRING) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("%", "&#037;", $vb45cffe084dd3d20d928bee85e7b0f21);}else {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace(array("&#037;", "&#37;"), "%", $vb45cffe084dd3d20d928bee85e7b0f21);}return $vb45cffe084dd3d20d928bee85e7b0f21;}public static function filterCDATA($vb45cffe084dd3d20d928bee85e7b0f21) {$vb45cffe084dd3d20d928bee85e7b0f21 = str_replace("]]>", "]]&gt;", $vb45cffe084dd3d20d928bee85e7b0f21);return $vb45cffe084dd3d20d928bee85e7b0f21;}protected function setObjectIsUpdated() {if($va8cfde6331bd59eb2ac96f8911c4b666 = $this->getObject()) {$va8cfde6331bd59eb2ac96f8911c4b666->setIsUpdated();return true;}else {return false;}}protected function getPropData() {$v0fea6a13c52b4d4725368f24b045ca84 = &umiObjectProperty::$dataCache;if(defined("DISABLE_GETVAL_OPT") && DISABLE_GETVAL_OPT) {return false;}$v945100186b119048837b9859c2c46410 = $this->field_id;$v16b2b26000987faccb260b9d39df1269 = $this->object_id;if(!isset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269])) {$v8d777f385d3dfec8815d20f7496026dc = array();$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT field_id, int_val, varchar_val, text_val, rel_val, tree_val, float_val FROM {$this->tableName} WHERE obj_id = '{$this->id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);while($vf1965a857bc285d26fe22023aa5ab50d = mysql_fetch_assoc($result)) {$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['int_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['int_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['varchar_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['varchar_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['text_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['text_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['rel_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['rel_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['tree_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['tree_val'];$v8d777f385d3dfec8815d20f7496026dc[$vf1965a857bc285d26fe22023aa5ab50d['field_id']]['float_val'][] = $vf1965a857bc285d26fe22023aa5ab50d['float_val'];}$v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269] = $v8d777f385d3dfec8815d20f7496026dc;if(sizeof($v0fea6a13c52b4d4725368f24b045ca84) >= 3) {foreach($v0fea6a13c52b4d4725368f24b045ca84 as $v865c0c0b4ab0e063e5caa3387c1a8741 => $v8277e0910d750195b448797616e091ad) {unset($v0fea6a13c52b4d4725368f24b045ca84[$v865c0c0b4ab0e063e5caa3387c1a8741]);break;}}}else {$v8d777f385d3dfec8815d20f7496026dc = $v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269];}if(isset($v8d777f385d3dfec8815d20f7496026dc[$v945100186b119048837b9859c2c46410])) {$result = $v8d777f385d3dfec8815d20f7496026dc[$v945100186b119048837b9859c2c46410];unset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269][$v945100186b119048837b9859c2c46410]);if(sizeof($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269]) == 0){unset($v0fea6a13c52b4d4725368f24b045ca84[$v16b2b26000987faccb260b9d39df1269]);}return $result;}else {return false;}}public function getObject() {return umiObjectsCollection::getInstance()->getObject($this->object_id);}public function getObjectId() {return $this->object_id;}public function getField() {return $this->field;}protected static function unescapeFilePath($v6a2a431fe8b621037ea949531c28551d) {return str_replace("\\\\", "/", $v6a2a431fe8b621037ea949531c28551d);}protected function deleteCurrentRows() {$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND (field_id = '{$this->field_id}' OR field_id IS NULL)";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = l_mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}}protected function fillNull() {$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT COUNT(*) FROM {$this->tableName} WHERE obj_id = '{$this->object_id}' AND field_id = '{$this->field_id}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = l_mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {list($v4a8a08f09d37b73795649038408b5f33) = mysql_fetch_row($result);}if($v4a8a08f09d37b73795649038408b5f33 == 0) {$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO {$this->tableName} (obj_id, field_id) VALUES('{$this->object_id}', '{$this->field_id}')";l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if($v56bd7107802ebe56c6918992f0608ec6 = l_mysql_error()) {throw new coreException($v56bd7107802ebe56c6918992f0608ec6);return false;}else {return true;}}return true;}protected static function getClassNameByFieldId($v3aabf39f2d943fa886d86dcbbee4d910) {static $v0fea6a13c52b4d4725368f24b045ca84 = Array();if(isset($v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910]) && !self::$IGNORE_CACHE) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910];}$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v3aabf39f2d943fa886d86dcbbee4d910);$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $v06e3d36fa30cea095545139854ad1fb9->getFieldTypeId();$v833750ac635fcc57dc33ecafe365f9a7 = umiFieldTypesCollection::getInstance()->getFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);$v5fd6df40d7c4dd7f503475344d8c145c = $v833750ac635fcc57dc33ecafe365f9a7->getDataType();$v8f7cd34efac0926458bbd05f62c13001 = Array(    'relation' => 'umiObjectPropertyRelation',    'wysiwyg' => 'umiObjectPropertyWYSIWYG',    'string' => 'umiObjectPropertyString',    'file' => 'umiObjectPropertyFile',    'img_file' => 'umiObjectPropertyImgFile',    'swf_file' => 'umiObjectPropertyImgFile',    'video_file' => 'umiObjectPropertyFile',    'boolean' => 'umiObjectPropertyBoolean',    'int' => 'umiObjectPropertyInt',    'text' => 'umiObjectPropertyText',    'date' => 'umiObjectPropertyDate',    'symlink' => 'umiObjectPropertySymlink',    'price' => 'umiObjectPropertyPrice',    'float' => 'umiObjectPropertyFloat',    'tags' => 'umiObjectPropertyTags',    'password' => 'umiObjectPropertyPassword',    'counter' => 'umiObjectPropertyCounter',    'optioned' => 'umiObjectPropertyOptioned'   );if(isset($v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c])) {return $v0fea6a13c52b4d4725368f24b045ca84[$v3aabf39f2d943fa886d86dcbbee4d910] = $v8f7cd34efac0926458bbd05f62c13001[$v5fd6df40d7c4dd7f503475344d8c145c];}else {throw new coreException("Unhandled field of type \"{$v5fd6df40d7c4dd7f503475344d8c145c}\"");}}public static function objectsByValue($v0f728ec6147eaec54f5f45e37bce8ddd, $v2ef4385ee1f18f02679161fef2b094d9 = NULL, $v95fc2db4375309c569794b723adc3972 = false, $vf80384e7987156531edaa3afd549957d = true, $v8ef57923ab3049b18fb75541ff476ff7 = NULL) {$v30a7d3f52b5af853f2a7bba352210a34 = array();if (!(is_null($v2ef4385ee1f18f02679161fef2b094d9) || is_array($v2ef4385ee1f18f02679161fef2b094d9) || intval($v2ef4385ee1f18f02679161fef2b094d9) === -1 || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'all' || strval($v2ef4385ee1f18f02679161fef2b094d9) == 'Все')) {$v2ef4385ee1f18f02679161fef2b094d9 = array($v2ef4385ee1f18f02679161fef2b094d9);}$v9effabcdaed14aab9cb00acddfa00fc9 = NULL;if ($v95fc2db4375309c569794b723adc3972) {if (is_null($v8ef57923ab3049b18fb75541ff476ff7)) {$v9effabcdaed14aab9cb00acddfa00fc9 = array(cmsController::getInstance()->getCurrentDomain()->getId());}elseif (intval($v8ef57923ab3049b18fb75541ff476ff7) === -1 || strval($v8ef57923ab3049b18fb75541ff476ff7) === 'all' || strval($v8ef57923ab3049b18fb75541ff476ff7) == 'Все') {$v9effabcdaed14aab9cb00acddfa00fc9 = array();}elseif (is_array($v8ef57923ab3049b18fb75541ff476ff7)) {$v9effabcdaed14aab9cb00acddfa00fc9 = array_map('intval', $v8ef57923ab3049b18fb75541ff476ff7);}else {$v9effabcdaed14aab9cb00acddfa00fc9 = array(intval($v8ef57923ab3049b18fb75541ff476ff7));}}$v06e3d36fa30cea095545139854ad1fb9 = umiFieldsCollection::getInstance()->getField($v0f728ec6147eaec54f5f45e37bce8ddd);if($v06e3d36fa30cea095545139854ad1fb9 instanceof umiField) {$v5fd6df40d7c4dd7f503475344d8c145c = $v06e3d36fa30cea095545139854ad1fb9->getFieldType()->getDataType();$v8ae9391858dfdc11dbd8f15cf9b04a26 = umiFieldType::getDataTypeDB($v5fd6df40d7c4dd7f503475344d8c145c);}else {throw new coreException("Field #{$v945100186b119048837b9859c2c46410} not found");}$v6301cee35ea764a1e241978f93f01069 = umiSelectionsParser::getObjectTypeByFieldId($v0f728ec6147eaec54f5f45e37bce8ddd);$v80071f37861c360a27b7327e132c911a = umiBranch::getBranchedTableByTypeId($v6301cee35ea764a1e241978f93f01069);$v01b41e749613a642fc384ed8af3245fc = "{$v80071f37861c360a27b7327e132c911a} `o`";if ($v95fc2db4375309c569794b723adc3972) $v01b41e749613a642fc384ed8af3245fc .= ", cms3_hierarchy `h`";if ($v95fc2db4375309c569794b723adc3972) {$v7dd0d06edf4c4299ce1a5978eb469fd8 = "h.id";}else {$v7dd0d06edf4c4299ce1a5978eb469fd8 = "o.obj_id";}$vc3a74cf64b6ccb62fa49a21123cbc72f = ($v95fc2db4375309c569794b723adc3972 ? " AND h.obj_id = o.obj_id AND h.is_active=1 AND h.is_deleted=0" : "");if ($v95fc2db4375309c569794b723adc3972 && is_array($v9effabcdaed14aab9cb00acddfa00fc9) && count($v9effabcdaed14aab9cb00acddfa00fc9)) {$vc3a74cf64b6ccb62fa49a21123cbc72f .= " AND h.domain_id IN ('".implode("', '", $v9effabcdaed14aab9cb00acddfa00fc9)."')";}$v86f6d00b1c7dbb44f4cd5edf49c29aa0 = "";if (!(intval($v2ef4385ee1f18f02679161fef2b094d9) === -1 || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'all' || strval($v2ef4385ee1f18f02679161fef2b094d9) === 'Âñå')) {$v86f6d00b1c7dbb44f4cd5edf49c29aa0 = " AND o.{$v8ae9391858dfdc11dbd8f15cf9b04a26} ".(is_null($v2ef4385ee1f18f02679161fef2b094d9) ? "IS NULL" : "IN ('".implode("', '", $v2ef4385ee1f18f02679161fef2b094d9)."')");}if ($vf80384e7987156531edaa3afd549957d) {$vf3e7552257b4e44beacffb073506f43d = "SELECT o.".$v8ae9391858dfdc11dbd8f15cf9b04a26." as `value`, COUNT(".$v7dd0d06edf4c4299ce1a5978eb469fd8.") as `items` FROM ".$v01b41e749613a642fc384ed8af3245fc." WHERE o.field_id = ".$v0f728ec6147eaec54f5f45e37bce8ddd.$v86f6d00b1c7dbb44f4cd5edf49c29aa0.$vc3a74cf64b6ccb62fa49a21123cbc72f." GROUP BY o.".$v8ae9391858dfdc11dbd8f15cf9b04a26." ORDER BY `items`";}else {$vf3e7552257b4e44beacffb073506f43d = "SELECT DISTINCT ".$v7dd0d06edf4c4299ce1a5978eb469fd8." as `item` FROM ".$v01b41e749613a642fc384ed8af3245fc." WHERE o.field_id = ".$v0f728ec6147eaec54f5f45e37bce8ddd.$v86f6d00b1c7dbb44f4cd5edf49c29aa0.$vc3a74cf64b6ccb62fa49a21123cbc72f;}$ve7d010371cfd5717d3d0b7d8e4c87803 = array();$v98291d7af1e21c41194125137e4f90ec = l_mysql_query($vf3e7552257b4e44beacffb073506f43d);$ved05f7aecf3d274bef532a3ade31ad02 = mysql_errno();$v89d8e64b77430ce4f0fe8ead989285bd = l_mysql_error();if ($v98291d7af1e21c41194125137e4f90ec === false || $ved05f7aecf3d274bef532a3ade31ad02) {throw new coreException("Error executing db query (errno ".$ved05f7aecf3d274bef532a3ade31ad02.", error ".$v89d8e64b77430ce4f0fe8ead989285bd.", query ".$vf3e7552257b4e44beacffb073506f43d.")");}else {while ($v7b93a31f8c7688c32c5a551b0e4937ee = mysql_fetch_assoc($v98291d7af1e21c41194125137e4f90ec)) {$ve7d010371cfd5717d3d0b7d8e4c87803[] = $v7b93a31f8c7688c32c5a551b0e4937ee;}}if ($vf80384e7987156531edaa3afd549957d) {$v30a7d3f52b5af853f2a7bba352210a34['values'] = array();$vae886317ab0305e3e6a1638659ea03fa = 0;$v663ccf380acaf3f549f1612654dc109d = 0;foreach ($ve7d010371cfd5717d3d0b7d8e4c87803 as $vabd12a9143f26fa85e562e69c01c48db) {$v97023380f9705264978115e6ce880ca5 = intval($vabd12a9143f26fa85e562e69c01c48db['items']);$v30a7d3f52b5af853f2a7bba352210a34['values'][] = array('value' => $vabd12a9143f26fa85e562e69c01c48db['value'], 'cnt' => $v97023380f9705264978115e6ce880ca5);if ($v97023380f9705264978115e6ce880ca5 > $vae886317ab0305e3e6a1638659ea03fa) $vae886317ab0305e3e6a1638659ea03fa = $v97023380f9705264978115e6ce880ca5;$v663ccf380acaf3f549f1612654dc109d += $v97023380f9705264978115e6ce880ca5;}$v30a7d3f52b5af853f2a7bba352210a34['max'] = $vae886317ab0305e3e6a1638659ea03fa;$v30a7d3f52b5af853f2a7bba352210a34['sum'] = $v663ccf380acaf3f549f1612654dc109d;}else {foreach ($ve7d010371cfd5717d3d0b7d8e4c87803 as $vabd12a9143f26fa85e562e69c01c48db) $v30a7d3f52b5af853f2a7bba352210a34[] = $vabd12a9143f26fa85e562e69c01c48db['item'];}return $v30a7d3f52b5af853f2a7bba352210a34;}protected function applyParams($vf09cc7ee3a9a93273f4b80601cafb00c, $v21ffce5b8a6cc8cc6a41448dd69623c9 = NULL) {return $vf09cc7ee3a9a93273f4b80601cafb00c;}protected function prepareRelationValue($v2063c1608d6e0baf80249c42e2be5804) {if(!$v2063c1608d6e0baf80249c42e2be5804) {return false;}$v5891da2d64975cae48d175d1e001f5da = umiObjectsCollection::getInstance();$ve23ef6e93b070c8d28adc485c1f13b73 = self::$USE_FORCE_OBJECTS_CREATION;if(is_object($v2063c1608d6e0baf80249c42e2be5804)) {return $v2063c1608d6e0baf80249c42e2be5804->getId();}else {if(is_numeric($v2063c1608d6e0baf80249c42e2be5804) && $v5891da2d64975cae48d175d1e001f5da->isExists($v2063c1608d6e0baf80249c42e2be5804) && !$ve23ef6e93b070c8d28adc485c1f13b73) {return (int) $v2063c1608d6e0baf80249c42e2be5804;}else {if($v051369818a8073bba5feeb0e957eb308 = $this->field->getGuideId()) {$vbb4744ed1cc7cb81da0e8cdd2e483cba = self::filterInputString($v2063c1608d6e0baf80249c42e2be5804);$v203545a9e649460edbff71e994cadaf2 = $this->translateI18n($vbb4744ed1cc7cb81da0e8cdd2e483cba);$vac5c74b64b4b8352ef2f181affb5ac2a = "SELECT id FROM cms3_objects WHERE type_id = '{$v051369818a8073bba5feeb0e957eb308}' AND name = '{$v203545a9e649460edbff71e994cadaf2}'";$result = l_mysql_query($vac5c74b64b4b8352ef2f181affb5ac2a);if(mysql_num_rows($result)) {list($v2063c1608d6e0baf80249c42e2be5804) = mysql_fetch_row($result);return $v2063c1608d6e0baf80249c42e2be5804;}else {$v6b129fccdc94a378ccc9252d41faa842 = ($v203545a9e649460edbff71e994cadaf2 == $vbb4744ed1cc7cb81da0e8cdd2e483cba) ? $v2063c1608d6e0baf80249c42e2be5804 : $v203545a9e649460edbff71e994cadaf2;if($v2063c1608d6e0baf80249c42e2be5804 = $v5891da2d64975cae48d175d1e001f5da->addObject($v6b129fccdc94a378ccc9252d41faa842, $v051369818a8073bba5feeb0e957eb308)) {return (int) $v2063c1608d6e0baf80249c42e2be5804;}else {throw new coreException("Can't create guide item");}}}else {return null;}}}}};?>
