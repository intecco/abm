<?php
 class YMLExporter extends umiExporter {public function setOutputBuffer() {$v7f2db423a49b305459147332fb01cf87 = outputBuffer::current('HTTPOutputBuffer');$v7f2db423a49b305459147332fb01cf87->charset("windows-1251");$v7f2db423a49b305459147332fb01cf87->contentType("text/xml");return $v7f2db423a49b305459147332fb01cf87;}public function export($v92ec19ffde05e15769b1bb3ee05ad745) {$vb80bb7740288fda1f201890375a60c8f = getRequest('param0');$v100664c6e2c0333b19a729f2f3ddb7dd = CURRENT_WORKING_DIR . "/sys-temp/yml/";if(!file_exists($v100664c6e2c0333b19a729f2f3ddb7dd . $vb80bb7740288fda1f201890375a60c8f . 'el')) {throw new publicException('<a href="' . getLabel("label-errors-no-information") . '" target="blank">' . getLabel("label-errors-no-information") .'</a>');}$v2a05e4f9b3949ba2c0b7d413a0863c3f = unserialize(file_get_contents($v100664c6e2c0333b19a729f2f3ddb7dd . $vb80bb7740288fda1f201890375a60c8f . 'el'));$v0f635d0e0f3874fff8b581c132e6c7a7 = $v100664c6e2c0333b19a729f2f3ddb7dd . $vb80bb7740288fda1f201890375a60c8f . ".xml";if(file_exists($v0f635d0e0f3874fff8b581c132e6c7a7)) unlink ($v0f635d0e0f3874fff8b581c132e6c7a7);file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, '<?xml version="1.0" encoding="windows-1251"?><!DOCTYPE yml_catalog SYSTEM "shops.dtd"><yml_catalog date="' . date('Y-m-d H:i') . '"><shop>');if(file_exists($v100664c6e2c0333b19a729f2f3ddb7dd . 'shop' . $vb80bb7740288fda1f201890375a60c8f)) file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, file_get_contents($v100664c6e2c0333b19a729f2f3ddb7dd . 'shop' . $vb80bb7740288fda1f201890375a60c8f), FILE_APPEND);if (file_exists($v100664c6e2c0333b19a729f2f3ddb7dd . 'currencies')) file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, file_get_contents($v100664c6e2c0333b19a729f2f3ddb7dd . 'currencies'), FILE_APPEND);if (file_exists($v100664c6e2c0333b19a729f2f3ddb7dd . 'categories' . $vb80bb7740288fda1f201890375a60c8f)) {file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, '<categories>', FILE_APPEND);$vb0b5ccb4a195a07fd3eed14affb8695f = unserialize(file_get_contents($v100664c6e2c0333b19a729f2f3ddb7dd . 'categories' . $vb80bb7740288fda1f201890375a60c8f));foreach ($vb0b5ccb4a195a07fd3eed14affb8695f as $v88be62ccbc2801ce90084c1356d22820 => $vb068931cc450442b63f5b3d276ea4297) {file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, $vb068931cc450442b63f5b3d276ea4297, FILE_APPEND);}file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, '</categories>', FILE_APPEND);}file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, '<offers>', FILE_APPEND);foreach($v2a05e4f9b3949ba2c0b7d413a0863c3f as $v7ac41b7f1504a8782ee40cd469d95431){$v47826cacc65c665212b821e6ff80b9b0 = $v100664c6e2c0333b19a729f2f3ddb7dd . $v7ac41b7f1504a8782ee40cd469d95431 . '.txt';if(is_file($v47826cacc65c665212b821e6ff80b9b0)) {file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, file_get_contents($v47826cacc65c665212b821e6ff80b9b0), FILE_APPEND);}}file_put_contents($v0f635d0e0f3874fff8b581c132e6c7a7, '</offers></shop></yml_catalog>', FILE_APPEND);return file_get_contents($v0f635d0e0f3874fff8b581c132e6c7a7);}}?>