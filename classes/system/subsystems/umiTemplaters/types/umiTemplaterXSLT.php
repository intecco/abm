<?php
 class umiTemplaterXSLT extends umiTemplater {private $domXSL;private $domXML;public function parse($v87cd8b8808600624d8c590cfc2e6e94b, $v9a0364b9e99bb480dd25e1f0284c8555 = null) {if (is_null($this->domXSL)) {$this->domXSL = $this->prepareXSL($this->templatesSource);}$va3c3308ab3cad416697b6e49b5481ce2 = ($this->domXML instanceof DOMDocument) ? $this->domXML : $this->prepareXML($v87cd8b8808600624d8c590cfc2e6e94b);$v801f7201346b43f8ee8390a1ef20ddcd = new xsltProcessor;$v801f7201346b43f8ee8390a1ef20ddcd->registerPHPFunctions();if (defined("UMI_XSLT_PROFILER_LOG") && version_compare(PHP_VERSION,'5.3.0','>=')) {$v801f7201346b43f8ee8390a1ef20ddcd->setProfiling(UMI_XSLT_PROFILER_LOG);}$v818f9c45cfa30eeff277ef38bcbe9910 = errorsXsltListen();$v801f7201346b43f8ee8390a1ef20ddcd->importStyleSheet($this->domXSL);if ($va0f97308110b5ffc40d784efae2257bb = cmsController::getInstance()->detectCurrentDesignTemplate()) {$v40def08eb6011aefb2505a262252de92 = array(     'template-name' => $va0f97308110b5ffc40d784efae2257bb->getName(),     'template-resources' => $va0f97308110b5ffc40d784efae2257bb->getResourcesDirectory(true)    );$this->addRequestParams($v801f7201346b43f8ee8390a1ef20ddcd, $v40def08eb6011aefb2505a262252de92);}$this->addRequestParams($v801f7201346b43f8ee8390a1ef20ddcd, $_REQUEST);$this->addRequestParams($v801f7201346b43f8ee8390a1ef20ddcd, $_SERVER, "_");$v9b207167e5381c47682c6b4f58a623fb =  $v801f7201346b43f8ee8390a1ef20ddcd->transformToXML($va3c3308ab3cad416697b6e49b5481ce2);errorsXsltCheck($v818f9c45cfa30eeff277ef38bcbe9910);return $v9b207167e5381c47682c6b4f58a623fb;}public static function getTemplates($v9cd3487945daada914909f0b525e1284) {$args = func_get_args();unset($args[0]);$result = array();foreach ($args as $v61dd86c2dc75c3f569ec619bd283a33f) {$result[] = 'file://' . $v9cd3487945daada914909f0b525e1284 . "#" . $v61dd86c2dc75c3f569ec619bd283a33f;}return $result;}public static function loadTemplates($v9cd3487945daada914909f0b525e1284) {return array();}public function setXmlDocument(DOMDocument $v0959255e58deb48af99b55012796abd6) {$this->domXML = $v0959255e58deb48af99b55012796abd6;}protected function prepareXML($v87cd8b8808600624d8c590cfc2e6e94b) {if ($v87cd8b8808600624d8c590cfc2e6e94b instanceof DOMDocument) return $v87cd8b8808600624d8c590cfc2e6e94b;$va3c3308ab3cad416697b6e49b5481ce2 = new DOMDocument("1.0", "utf-8");$va3c3308ab3cad416697b6e49b5481ce2->formatOutput = XML_FORMAT_OUTPUT;$v173a1756d2d82394cb803161f70f9a38 = $va3c3308ab3cad416697b6e49b5481ce2->appendChild($va3c3308ab3cad416697b6e49b5481ce2->createElement("result"));$v173a1756d2d82394cb803161f70f9a38->setAttribute('xmlns:xlink', 'http://www.w3.org/TR/xlink');$v607f2f3099f2a347b327caa70e0be4b2 = new xmlTranslator($va3c3308ab3cad416697b6e49b5481ce2);$v607f2f3099f2a347b327caa70e0be4b2->translateToXml($v173a1756d2d82394cb803161f70f9a38, $v87cd8b8808600624d8c590cfc2e6e94b);return $va3c3308ab3cad416697b6e49b5481ce2;}protected function prepareXSL($v9cd3487945daada914909f0b525e1284) {if (!is_file($v9cd3487945daada914909f0b525e1284)) {throw new coreException('Not found template "' . $v9cd3487945daada914909f0b525e1284 . '".', 10004);}$v5b2c3a197b9a058bc3b5afd8120441d4 = new DOMDocument('1.0', 'utf-8');$v5b2c3a197b9a058bc3b5afd8120441d4->resolveExternals = true;$v5b2c3a197b9a058bc3b5afd8120441d4->substituteEntities = true;$v5b2c3a197b9a058bc3b5afd8120441d4->load($v9cd3487945daada914909f0b525e1284, DOM_LOAD_OPTIONS);return $v5b2c3a197b9a058bc3b5afd8120441d4;}protected function addRequestParams(xsltProcessor $v801f7201346b43f8ee8390a1ef20ddcd, $vf1f713c9e000f5d3f280adbd124df4f5, $v851f5ac9941d720844d143ed9cfcf60a = "") {foreach($vf1f713c9e000f5d3f280adbd124df4f5 as $v3c6e0b8a9c15224a8228b9a98ca1531d => $v3a6d0284e743dc4a9b86f97d6dd1a3bf) {$v3c6e0b8a9c15224a8228b9a98ca1531d = strtolower($v3c6e0b8a9c15224a8228b9a98ca1531d);if(!is_array($v3a6d0284e743dc4a9b86f97d6dd1a3bf)) {if(strpos($v3a6d0284e743dc4a9b86f97d6dd1a3bf, "'") !== false && strpos($v3a6d0284e743dc4a9b86f97d6dd1a3bf, "\"") !== false) {$v3a6d0284e743dc4a9b86f97d6dd1a3bf = str_replace("'", "\\\"", $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}$v3c6e0b8a9c15224a8228b9a98ca1531d = str_replace(array(':'), array(''), $v3c6e0b8a9c15224a8228b9a98ca1531d);$v801f7201346b43f8ee8390a1ef20ddcd->setParameter("", $v851f5ac9941d720844d143ed9cfcf60a . $v3c6e0b8a9c15224a8228b9a98ca1531d, $v3a6d0284e743dc4a9b86f97d6dd1a3bf);}else {$this->addRequestParams($v801f7201346b43f8ee8390a1ef20ddcd, $v3a6d0284e743dc4a9b86f97d6dd1a3bf, $v851f5ac9941d720844d143ed9cfcf60a . $v3c6e0b8a9c15224a8228b9a98ca1531d . ".");}}}}